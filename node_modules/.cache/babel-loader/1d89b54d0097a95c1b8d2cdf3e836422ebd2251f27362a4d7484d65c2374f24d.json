{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BrowserRouter,Routes,Route}from\"react-router-dom\";import MyNavbar from'./components/navbar';import Home from'./components/home';import Users from'./components/users';import Productos from'./components/products';import Categorias from'./components/categories';import{parseJwt}from'./utils/parseJWT';import AppBreadcrumb from'./components/breadcrumb';import{getCategorias}from'./services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[token,setToken]=useState(localStorage.getItem('token'));const[activeUser,setActiveUser]=useState(null);const[roles,setRoles]=useState(()=>localStorage.getItem('roles')||[]);const[allCategories,setAllCategories]=useState([]);const[activeKey,setActiveKey]=useState(()=>localStorage.getItem('activeKey')||'');useEffect(()=>{if(!token){setActiveUser(null);setAllCategories([]);return;}const fetchCategories=async()=>{try{const categoriesResponse=await getCategorias(token);setAllCategories(categoriesResponse.data);}catch(error){console.error('Error fetching categories or roles:',error);}};fetchCategories();},[token]);useEffect(()=>{if(token){const payload=parseJwt(token);setActiveUser(payload===null||payload===void 0?void 0:payload.sub);setRoles((payload===null||payload===void 0?void 0:payload.roles)||[]);localStorage.setItem('roles',JSON.stringify((payload===null||payload===void 0?void 0:payload.roles)||[]));}else{setActiveUser(null);}},[token]);return/*#__PURE__*/_jsxs(BrowserRouter,{children:[/*#__PURE__*/_jsx(MyNavbar,{token:token,setToken:setToken,activeUser:activeUser,setActiveUser:setActiveUser,roles:roles,setRoles:setRoles,activeKey:activeKey,setActiveKey:setActiveKey}),token&&/*#__PURE__*/_jsx(AppBreadcrumb,{activeUser:activeUser}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{token:token})}),/*#__PURE__*/_jsx(Route,{path:\"productos\",element:/*#__PURE__*/_jsx(Productos,{token:token,categories:allCategories,setCategories:setAllCategories,roles:roles})}),/*#__PURE__*/_jsx(Route,{path:\"categorias\",element:/*#__PURE__*/_jsx(Categorias,{categories:allCategories,setCategories:setAllCategories,token:token,roles:roles})}),token&&/*#__PURE__*/_jsx(Route,{path:\"usuarios\",element:/*#__PURE__*/_jsx(Users,{token:token,activeUser:activeUser,roles:roles})})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Routes","Route","MyNavbar","Home","Users","Productos","Categorias","parseJwt","AppBreadcrumb","getCategorias","jsx","_jsx","jsxs","_jsxs","App","token","setToken","localStorage","getItem","activeUser","setActiveUser","roles","setRoles","allCategories","setAllCategories","activeKey","setActiveKey","fetchCategories","categoriesResponse","data","error","console","payload","sub","setItem","JSON","stringify","children","path","element","categories","setCategories"],"sources":["D:/Users/FakeR/eclipse-workspace/spring-workspaces/RESTAPI/API/ReactFrontend/inventory/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { BrowserRouter, Routes, Route } from \"react-router-dom\";\r\nimport MyNavbar from './components/navbar';\r\nimport Home from './components/home';\r\nimport Users from './components/users';\r\nimport Productos from './components/products';\r\nimport Categorias from './components/categories';\r\nimport { parseJwt } from './utils/parseJWT';\r\nimport AppBreadcrumb from './components/breadcrumb';\r\nimport {  getCategorias } from './services/api';\r\n\r\n\r\nfunction App() {\r\n  const [token, setToken] = useState(localStorage.getItem('token'));\r\n  const [activeUser, setActiveUser] = useState(null);\r\n  const [roles, setRoles] = useState(() => localStorage.getItem('roles') || []);\r\n  const [allCategories, setAllCategories] = useState([]);\r\n  const [activeKey, setActiveKey] = useState(() => localStorage.getItem('activeKey') || '');\r\n  \r\n  useEffect(() => {\r\n\tif (!token) {\n      setActiveUser(null);\r\n\t  setAllCategories([]);\r\n\t  return;\r\n\t}\r\n    const fetchCategories = async () => {\r\n        try {\n\t\t    const categoriesResponse = await getCategorias(token);\n\t\t    setAllCategories(categoriesResponse.data);\n\t\t} catch (error) {\n\t\t    console.error('Error fetching categories or roles:', error);\n\t\t}\n\t\t}\r\n\t    fetchCategories();\r\n\t}, [token]);\r\n  \r\n  useEffect(() => {\r\n    if (token) {\r\n      const payload = parseJwt(token);\r\n      setActiveUser(payload?.sub); \r\n\t  setRoles(payload?.roles || []);\r\n\t  localStorage.setItem('roles', JSON.stringify(payload?.roles || []));\r\n    } else {\r\n      setActiveUser(null);\r\n    }\r\n  }, [token]);\r\n\r\n  return (\r\n\t  <BrowserRouter>\r\n        <MyNavbar \n          token={token} \n          setToken={setToken} \n          activeUser={activeUser} \n          setActiveUser={setActiveUser}\r\n\t\t  roles={roles} setRoles={setRoles}\r\n\t\t  activeKey={activeKey} setActiveKey={setActiveKey}\n        />\r\n\t\t{token && <AppBreadcrumb activeUser={activeUser} />}\r\n\t    <Routes>\r\n\t\t  <Route path=\"/\" element={<Home token={token} />} />\r\n\t\t  <Route  path={\"productos\"} element={<Productos token={token} \r\n\t\t  \t\t\t\t\t\t\tcategories={allCategories} setCategories={setAllCategories}\r\n\t\t\t\t\t\t\t\t\troles={roles}/>} \r\n\t\t  />\r\n\t\t  <Route path={\"categorias\"}  element={<Categorias categories={allCategories} \r\n\t\t  \t\t\t\t\t\t\t\tsetCategories={setAllCategories} \r\n\t\t\t\t\t\t\t\t\t\ttoken={token} roles={roles} />}  \r\n\t\t\t/>\r\n\t\t  {token && <Route path={\"usuarios\"} element={<Users \r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttoken={token} activeUser={activeUser} \r\n\t\t\t\t\t\t\t\t\t\t\t\t\troles={roles} />} \r\n\t\t\t/>}\r\n\r\n\t\t </Routes>\r\n\t  </BrowserRouter>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}