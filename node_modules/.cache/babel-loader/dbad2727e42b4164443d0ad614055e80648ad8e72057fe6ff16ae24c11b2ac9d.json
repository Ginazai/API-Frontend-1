{"ast":null,"code":"import _objectSpread from\"D:/Users/FakeR/eclipse-workspace/spring-workspaces/RESTAPI/API/ReactFrontend/inventory/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{getProductos,getProductoCategorias,updateProductoCategorias,updateProducto,createProducto}from'../services/api';import{Card,Col,Container,Row,Button,Modal,Form,InputGroup,FloatingLabel}from'react-bootstrap';import{parseDateLong}from'../utils/parseDate';import GearImg from'../assets/images/gears.png';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Productos(_ref){let{token,categories,setCategories,roles}=_ref;const[products,setProducts]=useState([]);const[editProductId,setEditProductId]=useState(null);const[editForm,setEditForm]=useState({name:'',price:'',quantity:'',description:'',categories:[],active:true});const[error,setError]=useState('');const[setProductCategories]=useState([]);const[saveModal,setSaveModal]=useState(false);const[saveForm,setSaveForm]=useState({name:'',price:'',quantity:'',description:'',categories:[],active:true});useEffect(()=>{const fetchproducts=async()=>{try{const res=await getProductos(token);setProducts(res.data);// Asegúrate de acceder a .data\n}catch(err){setError('Error al obtener productos');console.error('Error al obtener products:',err);}};fetchproducts();},[token]);// Fetch categories for a product\nuseEffect(()=>{const fetchProductCategories=async productId=>{try{const res=await getProductoCategorias(productId,token);res.data=res.data||[];// Asegúrate de que res.data sea un array\nsetProductCategories(res.data);}catch(err){setError('Error al obtener categorías del producto');}};if(editProductId){fetchProductCategories(editProductId);}else{setProductCategories([]);}},[editProductId,token]);// Open modal and initialize form\nconst handleEditClick=producto=>{const fullCategories=Array.isArray(producto.categories)?producto.categories.map(cat=>categories.find(c=>c.id===(cat.id||cat))).filter(c=>c&&c.name)// Only keep valid categories\n:[];setEditProductId(producto.id);setEditForm({name:producto.name,price:producto.price,quantity:producto.quantity,description:producto.description||'',categories:fullCategories,active:producto.active});};// Handle edit form changes\nconst handleFormChange=e=>{const{name,value,type,checked}=e.target;setEditForm(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:type==='checkbox'?checked:value}));};// Handle save form changes\nconst handleSaveFormChange=e=>{const{name,value,type,checked}=e.target;setSaveForm(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:type==='checkbox'?checked:value}));};const handleCategoryChange=catId=>{setEditForm(prev=>{const categoriesArr=Array.isArray(prev.categories)?prev.categories:[];const exists=categoriesArr.some(c=>c.id===catId);if(exists){return _objectSpread(_objectSpread({},prev),{},{categories:categoriesArr.filter(c=>c.id!==catId)});}else{const catObj=categories.find(c=>c.id===catId);if(!catObj||!catObj.name)return prev;// Only add valid categories\nreturn _objectSpread(_objectSpread({},prev),{},{categories:[...categoriesArr,catObj]});}});};// Save changes\nconst handleSaveChanges=async()=>{await updateProducto(editProductId,editForm,token);// Strictly filter and deduplicate category names\nconst validNames=Array.from(new Set((editForm.categories||[]).map(c=>c&&c.name).filter(name=>typeof name==='string'&&name.trim()!=='')));if(validNames.length===0){setError('At least one valid category must be selected.');return;}try{await updateProductoCategorias(editProductId,{categories:validNames},token);const res=await getProductos(token);setProducts(res.data);setEditProductId(null);setError('');}catch(err){setError('Error updating product categories');}};// Save new product\nconst handleSaveNewProduct=async()=>{if(!saveForm.name||!saveForm.price){setError('Name and price are required');return;}try{await createProducto(saveForm,token);const res=await getProductos(token);// Fetch updated list\nsetProducts(res.data);setSaveModal(false);setSaveForm({name:'',price:'',categories:[],active:false});setError('');}catch(err){setError('Error creating product');}};if(!token)return null;return/*#__PURE__*/_jsxs(Container,{className:\"my-3\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',width:'100%',height:'60vh',minHeight:100,maxHeight:100,overflow:'hidden'},className:\"mb-4 shadow\",children:[/*#__PURE__*/_jsx(\"img\",{src:GearImg,alt:\"Home\",style:{width:'100%',height:'100%',objectFit:'cover',objectPosition:'center',transform:'scale(0.9)'}}),/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:0,left:0,width:'100%',height:'100%',display:'flex',flexDirection:'column',justifyContent:'center',alignItems:'flex-start',padding:'2rem'},children:/*#__PURE__*/_jsx(Button,{variant:\"dark\",className:\"float-end\",onClick:()=>setSaveModal(true),children:\"Agregar producto\"})})]}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(Modal,{show:saveModal,onHide:()=>setSaveModal(false),children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Nuevo Producto\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(Form,{id:\"new-product-form\",onSubmit:e=>{e.preventDefault();handleSaveNewProduct();},children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(FloatingLabel,{constrolId:\"floatingInput\",label:\"Nombre del producto\",className:\"mb-3\",children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"name\",value:saveForm.name,onChange:handleSaveFormChange,placeholder:\"Nombre del producto\"})})}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Form.Group,{as:Col,children:/*#__PURE__*/_jsxs(InputGroup,{children:[/*#__PURE__*/_jsx(InputGroup.Text,{children:\"$\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",name:\"price\",onChange:handleSaveFormChange,value:saveForm.price,placeholder:\"Precio del producto\"})]})}),/*#__PURE__*/_jsx(Form.Group,{as:Col,children:/*#__PURE__*/_jsxs(InputGroup,{children:[/*#__PURE__*/_jsx(InputGroup.Text,{children:\"Unidades\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",name:\"quantity\",value:saveForm.quantity,onChange:handleSaveFormChange,placeholder:\"Cantidad del producto\"})]})})]}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(FloatingLabel,{controlId:\"floatingInput\",className:\"my-3\",label:\"Descripci\\xF3n del producto\",children:/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",name:\"description\",value:saveForm.description,onChange:handleSaveFormChange,placeholder:\"Descripci\\xF3n del producto\",rows:3})})}),/*#__PURE__*/_jsxs(Row,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Categor\\xEDas del producto:\"}),categories.map(cat=>/*#__PURE__*/_jsx(Form.Check,{className:\"mx-3\",type:\"checkbox\",label:cat.name,name:\"categories\",onChange:()=>{const exists=saveForm.categories.some(c=>c.id===cat.id);if(exists){setSaveForm(prev=>_objectSpread(_objectSpread({},prev),{},{categories:prev.categories.filter(c=>c.id!==cat.id)}));}else{setSaveForm(prev=>_objectSpread(_objectSpread({},prev),{},{categories:[...prev.categories,cat]}));}},checked:saveForm.categories.some(c=>c.id===cat.id)},cat.id))]}),/*#__PURE__*/_jsx(Row,{className:\"m-2\",children:roles.includes('ROLE_ADMIN')&&/*#__PURE__*/_jsx(Form.Check,{type:\"switch\",name:\"active\",checked:saveForm.active,onChange:handleSaveFormChange,id:\"new-product-active-switch\",label:saveForm.active?\"Producto Activo\":\"Producto Inactivo\"})})]})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setSaveModal(false),children:\"Cerrar\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",form:\"new-product-form\",children:\"Guardar producto\"})]})]})})}),/*#__PURE__*/_jsxs(Row,{children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error}),products.map(producto=>/*#__PURE__*/_jsxs(Col,{xl:3,lg:3,md:6,sm:12,xs:12,className:\"mb-3\",children:[/*#__PURE__*/_jsxs(Card,{className:\"shadow-sm\",children:[/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:producto.name}),/*#__PURE__*/_jsx(Card.Subtitle,{className:\"my-1 text-muted\",children:producto.active===true?\"Disponible\":\"No disponible\"}),/*#__PURE__*/_jsx(Card.Text,{children:producto.description||'Sin descripción'}),/*#__PURE__*/_jsxs(Card.Text,{children:[\"$\",producto.price]}),/*#__PURE__*/_jsxs(Card.Text,{children:[\"Unidades disponibles: \",producto.quantity]}),/*#__PURE__*/_jsx(\"div\",{xs:\"auto\",children:/*#__PURE__*/_jsx(Button,{onClick:()=>handleEditClick(producto),size:\"sm\",variant:\"dark\",className:\"mx-1 float-end\",children:\"Editar\"})})]}),/*#__PURE__*/_jsx(Card.Footer,{className:\"text-muted float-end text-end\",children:/*#__PURE__*/_jsxs(\"i\",{children:[\"Ultima modificaci\\xF3n: \",parseDateLong(producto.last_update)]})})]}),/*#__PURE__*/_jsxs(Modal,{show:editProductId===producto.id,onHide:()=>setEditProductId(null),children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsxs(Modal.Title,{children:[\"Editando producto: \",producto.name]})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(Form,{id:\"edit-product-form\",onSubmit:e=>{e.preventDefault();handleSaveChanges();},children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(FloatingLabel,{controlId:\"floatingInput\",label:\"Nombre del producto\",className:\"mb-3\",children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"name\",value:editForm.name,onChange:handleFormChange,placeholder:\"Nombre del producto\"})})}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Form.Group,{as:Col,children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Precio\"}),/*#__PURE__*/_jsxs(InputGroup,{children:[/*#__PURE__*/_jsx(InputGroup.Text,{children:\"$\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",name:\"price\",value:editForm.price,onChange:handleFormChange,placeholder:\"Precio del producto\"})]})]}),/*#__PURE__*/_jsxs(Form.Group,{as:Col,children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Unidades\"}),/*#__PURE__*/_jsxs(InputGroup,{children:[/*#__PURE__*/_jsx(InputGroup.Text,{children:\"Unidades\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",name:\"quantity\",value:editForm.quantity,onChange:handleFormChange,placeholder:\"Cantidad del producto\"})]})]})]}),/*#__PURE__*/_jsx(Row,{className:\"my-3\",children:/*#__PURE__*/_jsx(FloatingLabel,{controlId:\"floatingInput\",label:\"Descripci\\xF3n del producto\",children:/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",name:\"description\",value:editForm.description,onChange:handleFormChange,placeholder:\"Descripci\\xF3n del producto\",rows:3})})}),/*#__PURE__*/_jsxs(Row,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Categor\\xEDas del producto:\"}),categories.map(cat=>/*#__PURE__*/_jsx(Form.Check,{className:\"mx-3\",type:\"checkbox\",label:cat.name,name:\"categories\",checked:Array.isArray(editForm.categories)&&editForm.categories.some(c=>c.id===cat.id),onChange:()=>handleCategoryChange(cat.id)},cat.id))]}),/*#__PURE__*/_jsx(Row,{className:\"m-2\",children:roles.includes('ROLE_ADMIN')&&/*#__PURE__*/_jsx(Form.Check,{type:\"switch\",name:\"active\",checked:editForm.active,onChange:handleFormChange,label:editForm.active?\"Producto Activo\":\"Producto Inactivo\"})})]})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setEditProductId(null),children:\"Cerrar\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",form:\"edit-product-form\",onClick:handleSaveChanges,children:\"Guardar Cambios\"})]})]})]},producto.id))]})]});}export default Productos;","map":{"version":3,"names":["React","useState","useEffect","getProductos","getProductoCategorias","updateProductoCategorias","updateProducto","createProducto","Card","Col","Container","Row","Button","Modal","Form","InputGroup","FloatingLabel","parseDateLong","GearImg","jsx","_jsx","jsxs","_jsxs","Productos","_ref","token","categories","setCategories","roles","products","setProducts","editProductId","setEditProductId","editForm","setEditForm","name","price","quantity","description","active","error","setError","setProductCategories","saveModal","setSaveModal","saveForm","setSaveForm","fetchproducts","res","data","err","console","fetchProductCategories","productId","handleEditClick","producto","fullCategories","Array","isArray","map","cat","find","c","id","filter","handleFormChange","e","value","type","checked","target","prev","_objectSpread","handleSaveFormChange","handleCategoryChange","catId","categoriesArr","exists","some","catObj","handleSaveChanges","validNames","from","Set","trim","length","handleSaveNewProduct","className","children","style","position","width","height","minHeight","maxHeight","overflow","src","alt","objectFit","objectPosition","transform","top","left","display","flexDirection","justifyContent","alignItems","padding","variant","onClick","show","onHide","Header","closeButton","Title","Body","onSubmit","preventDefault","constrolId","label","Control","onChange","placeholder","Group","as","Text","controlId","rows","Label","Check","includes","Footer","form","xl","lg","md","sm","xs","Subtitle","size","last_update"],"sources":["D:/Users/FakeR/eclipse-workspace/spring-workspaces/RESTAPI/API/ReactFrontend/inventory/src/components/products.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { getProductos, getProductoCategorias, updateProductoCategorias, \r\n\t\tupdateProducto, createProducto } from '../services/api';\r\nimport { Card, Col, Container, \r\n\t\tRow, Button, Modal, \r\n\t\tForm, InputGroup, FloatingLabel } from 'react-bootstrap';\r\nimport { parseDateLong } from '../utils/parseDate';\r\nimport GearImg from '../assets/images/gears.png';\r\n\r\nfunction Productos({ token, categories, setCategories, roles }) {\r\n\tconst [products, setProducts] = useState([]);\r\n\tconst [editProductId, setEditProductId] = useState(null);\r\n\tconst [editForm, setEditForm] = useState({ \r\n\t\tname: '', \r\n\t\tprice: '', \r\n\t\tquantity: '',\r\n\t\tdescription: '',\r\n\t\tcategories: [],\r\n\t\tactive: true \r\n\t});\r\n\tconst [error, setError] = useState('');\r\n\tconst [setProductCategories] = useState([]);\r\n\tconst [saveModal, setSaveModal] = useState(false);\r\n\tconst [saveForm, setSaveForm] = useState({\r\n\t\tname: '',\r\n\t\tprice: '',\r\n\t\tquantity: '',\r\n\t\tdescription: '',\r\n\t\tcategories: [],\r\n\t\tactive: true\r\n\t});\r\n\t\r\n\tuseEffect(() => {\r\n\t\tconst fetchproducts = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await getProductos(token);\r\n\t\t\t\tsetProducts(res.data); // Asegúrate de acceder a .data\r\n\t\t\t} catch (err) {\r\n\t\t\t\tsetError('Error al obtener productos');\r\n\t\t\t\tconsole.error('Error al obtener products:', err);\r\n\t\t\t}\r\n\t\t};\r\n\t\tfetchproducts();\r\n\t}, [token]);\r\n\t\r\n\t// Fetch categories for a product\r\n\tuseEffect(() => {\r\n\t\tconst fetchProductCategories = async (productId) => {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await getProductoCategorias(productId, token);\r\n\t\t\t\tres.data = res.data || []; // Asegúrate de que res.data sea un array\r\n\t\t\t\tsetProductCategories(res.data);\r\n\t\t\t} catch (err) {\r\n\t\t\t\tsetError('Error al obtener categorías del producto');\r\n\t\t\t}\r\n\t\t};\r\n\t\tif (editProductId) {\r\n\t\t\tfetchProductCategories(editProductId);\r\n\t\t} else {\r\n\t\t\tsetProductCategories([]);\t\t\r\n\t\t}\r\n\t}, [editProductId, token]);\t\r\n\r\n\t// Open modal and initialize form\r\n\tconst handleEditClick = (producto) => {\r\n\t  const fullCategories = Array.isArray(producto.categories)\r\n\t    ? producto.categories\r\n\t        .map(cat => categories.find(c => c.id === (cat.id || cat)))\r\n\t        .filter(c => c && c.name) // Only keep valid categories\r\n\t    : [];\r\n\t  setEditProductId(producto.id);\r\n\t  setEditForm({ \r\n\t    name: producto.name, \r\n\t    price: producto.price, \r\n        quantity: producto.quantity,\r\n\t    description: producto.description || '',\r\n\t    categories: fullCategories, \r\n\t    active: producto.active \r\n\t  });\r\n\t};\r\n\r\n\t  // Handle edit form changes\r\n\t  const handleFormChange = (e) => {\r\n\t    const { name, value, type, checked } = e.target;\r\n\t    setEditForm(prev => ({\r\n\t      ...prev,\r\n\t      [name]: type === 'checkbox' ? checked : value\r\n\t    }));\r\n\t  };\r\n\t  \r\n\t  // Handle save form changes\r\n\t  const handleSaveFormChange = (e) => {\r\n\t    const { name, value, type, checked } = e.target;\r\n\t    setSaveForm(prev => ({\r\n\t      ...prev,\r\n\t      [name]: type === 'checkbox' ? checked : value\r\n\t    }));\r\n\t  };\r\n\r\n\t  \r\n\t  const handleCategoryChange = (catId) => {\r\n\t    setEditForm(prev => {\r\n\t      const categoriesArr = Array.isArray(prev.categories) ? prev.categories : [];\r\n\t      const exists = categoriesArr.some(c => c.id === catId);\r\n\t      if (exists) {\r\n\t        return {\r\n\t          ...prev,\r\n\t          categories: categoriesArr.filter(c => c.id !== catId)\r\n\t        };\r\n\t      } else {\r\n\t        const catObj = categories.find(c => c.id === catId);\r\n\t        if (!catObj || !catObj.name) return prev; // Only add valid categories\r\n\t        return {\r\n\t          ...prev,\r\n\t          categories: [...categoriesArr, catObj]\r\n\t        };\r\n\t      }\r\n\t    });\r\n\t  };\r\n\t  // Save changes\r\n\t  const handleSaveChanges = async () => {\r\n\t    await updateProducto(editProductId, editForm, token);\r\n\r\n\t    // Strictly filter and deduplicate category names\r\n\t    const validNames = Array.from(\r\n\t      new Set(\r\n\t        (editForm.categories || [])\r\n\t          .map(c => c && c.name)\r\n\t          .filter(name => typeof name === 'string' && name.trim() !== '')\r\n\t      )\r\n\t    );\r\n\r\n\t    if (validNames.length === 0) {\r\n\t      setError('At least one valid category must be selected.');\r\n\t      return;\r\n\t    }\r\n\r\n\t    try {\r\n\t      await updateProductoCategorias(\r\n\t        editProductId,\r\n\t        { categories: validNames },\r\n\t        token\r\n\t      );\r\n\t      const res = await getProductos(token);\r\n\t      setProducts(res.data);\r\n\t      setEditProductId(null);\r\n\t      setError('');\r\n\t    } catch (err) {\r\n\t      setError('Error updating product categories');\r\n\t    }\r\n\t  };\r\n\t  \r\n\t  // Save new product\r\n\t  const handleSaveNewProduct = async () => {\r\n\t    if (!saveForm.name || !saveForm.price) {\r\n\t      setError('Name and price are required');\r\n\t      return;\r\n\t    }\r\n\t    try {\r\n\t      await createProducto(saveForm, token);\r\n\t      const res = await getProductos(token); // Fetch updated list\r\n\t      setProducts(res.data);\r\n\t      setSaveModal(false);\r\n\t      setSaveForm({\r\n\t        name: '',\r\n\t        price: '',\r\n\t        categories: [],\r\n\t        active: false\r\n\t      });\r\n\t      setError('');\r\n\t    } catch (err) {\r\n\t      setError('Error creating product');\r\n\t    }\r\n\t  };\r\n\t  \r\n\t  if (!token) return null;\r\n\r\n\t  return (\r\n\t    <Container className=\"my-3\">\r\n\t\t<div\r\n\t\t  style={{\r\n\t\t    position: 'relative',\r\n\t\t    width: '100%',\r\n\t\t    height: '60vh',\r\n\t\t    minHeight: 100,\r\n\t\t    maxHeight: 100,\r\n\t\t    overflow: 'hidden'\r\n\t\t  }}\r\n\t\t  className=\"mb-4 shadow\"\r\n\t\t>\r\n\t\t\t  <img\r\n\t\t\t    src={GearImg}\r\n\t\t\t    alt=\"Home\"\r\n\t\t\t    style={{\r\n\t\t\t      width: '100%',\r\n\t\t\t      height: '100%',\r\n\t\t\t      objectFit: 'cover',\r\n\t\t\t      objectPosition: 'center',\r\n\t\t\t\t  transform: 'scale(0.9)',\r\n\t\t\t    }}\r\n\t\t\t  />\r\n\t\t\t  <div\r\n\t\t\t    style={{\r\n\t\t\t      position: 'absolute',\r\n\t\t\t      top: 0,\r\n\t\t\t      left: 0,\r\n\t\t\t      width: '100%',\r\n\t\t\t      height: '100%',\r\n\t\t\t      display: 'flex',\r\n\t\t\t      flexDirection: 'column',\r\n\t\t\t      justifyContent: 'center',\r\n\t\t\t      alignItems: 'flex-start',\r\n\t\t\t      padding: '2rem'\r\n\t\t\t    }}\r\n\t\t\t  >\r\n\t\t\t  <Button\r\n\t            variant=\"dark\"\r\n\t\t\t\tclassName=\"float-end\"\r\n\t\t\t\tonClick={() => setSaveModal(true)}>\r\n\t                Agregar producto\r\n\t          </Button>\r\n\t\t    </div>\r\n\t\t</div>\r\n\t\t<Row className=\"mb-3\">\t\r\n\t\t    <Col>\r\n                \r\n\t\t\t\t<Modal\r\n\t\t\t    show={saveModal}\r\n\t\t\t\tonHide={() => setSaveModal(false)}\r\n\t\t\t\t>\r\n\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t<Modal.Title>Nuevo Producto</Modal.Title>\t\r\n\t\t\t\t</Modal.Header>\r\n\t\t\t\t<Modal.Body>\r\n\t\t\t\t\t<Form\r\n\t\t\t\t\tid=\"new-product-form\"\r\n\t\t\t\t\tonSubmit={e => { e.preventDefault(); handleSaveNewProduct();}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t    <FloatingLabel\r\n\t\t\t\t\t\tconstrolId=\"floatingInput\"\n                        label=\"Nombre del producto\"\n                        className=\"mb-3\">\r\n\t\t\t\t\t\t    <Form.Control\r\n\t\t\t\t                type=\"text\"\r\n\t\t\t                    name=\"name\"\r\n\t\t                        value={saveForm.name}\r\n\t\t\t\t\t\t\t\tonChange={handleSaveFormChange}\r\n\t                            placeholder=\"Nombre del producto\"\r\n                            />\r\n                        </FloatingLabel>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t    <Form.Group as={Col}>\t\t\t\t\t\t\r\n\t\t\t                <InputGroup>\r\n\t                            <InputGroup.Text>$</InputGroup.Text>\n\t                            <Form.Control\n\t                                type=\"number\"\n\t                                name=\"price\"\r\n\t\t\t\t\t\t\t\t\tonChange={handleSaveFormChange}\n\t                                value={saveForm.price}\n\t                                placeholder=\"Precio del producto\"\n\t                            />\r\n\t                        </InputGroup>\r\n\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t<Form.Group as={Col}>\r\n\t\t\t\t            <InputGroup>\r\n\t\t\t                    <InputGroup.Text>Unidades</InputGroup.Text>\n                                <Form.Control\n                                    type=\"number\"\n                                    name=\"quantity\"\n                                    value={saveForm.quantity}\n                                    onChange={handleSaveFormChange}\n                                    placeholder=\"Cantidad del producto\"\n                                />\r\n\t\t\t                </InputGroup>\r\n\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t    </Row>\r\n\t\t\t\t\t<Row className=\"mb-3\">\r\n\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\tcontrolId='floatingInput'\r\n\t\t\t\t\t\tclassName='my-3'\r\n\t\t\t\t\t\tlabel=\"Descripción del producto\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t    <Form.Control\r\n\t\t\t\t            as=\"textarea\"\r\n\t\t\t                name=\"description\"\r\n\t\t                    value={saveForm.description}\r\n\t                        onChange={handleSaveFormChange}\r\n                            placeholder=\"Descripción del producto\"\r\n\t                        rows={3}\r\n\t                      />\r\n\t\t\t\t\t\t  </FloatingLabel>\r\n\t\t\t\t    </Row>\r\n\t\t            <Row className=\"mb-3\">\r\n                        <Form.Label>Categorías del producto:</Form.Label>\r\n                        {categories.map(cat => (\n                          <Form.Check\n                            className=\"mx-3\"\n                            key={cat.id}\n                            type=\"checkbox\"\n                            label={cat.name}\n                            name=\"categories\"\r\n\t\t\t\t\t\t\tonChange={() => {\r\n\t                                const exists = saveForm.categories.some(c => c.id === cat.id);\r\n                                    if (exists) {\r\n                                        setSaveForm(prev => ({\n                                            ...prev,\n                                            categories: prev.categories.filter(c => c.id !== cat.id)\n                                        }));\n                                    } else {\t\t\t\t\t\t\t\t\r\n                                        setSaveForm(prev => ({\r\n                                            ...prev\r\n                                            , categories: [...prev.categories, cat]\r\n                                         }));\r\n\t\t                               }\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n                            checked={saveForm.categories.some(c => c.id === cat.id)}\n                          />\n                        ))}\r\n\t                </Row>\r\n                    <Row className=\"m-2\">\r\n\t\t\t\t\t{roles.includes('ROLE_ADMIN') && \r\n\t\t\t\t\t\t(<Form.Check\r\n                            type=\"switch\"\r\n                            name=\"active\"\r\n                            checked={saveForm.active}\r\n                            onChange={handleSaveFormChange}\r\n                            id=\"new-product-active-switch\"\r\n                            label={saveForm.active ? \"Producto Activo\" : \"Producto Inactivo\"}\r\n                        />)}\n                    </Row>\r\n                </Form>\r\n\t\t    </Modal.Body>\r\n\t\t\t<Modal.Footer>\r\n\t            <Button variant=\"secondary\"\r\n\t\t\t\tonClick={() => setSaveModal(false)}>\r\n                    Cerrar\r\n                </Button>\r\n                <Button \n                    variant=\"primary\" \n                    type=\"submit\"\n                    form=\"new-product-form\">\n                    Guardar producto\r\n                    </Button>\r\n\t\t\t</Modal.Footer>\r\n\t\t</Modal>\n        </Col>\r\n\t</Row>\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t      <Row>\r\n\t\t    {error && <div className=\"alert alert-danger\">{error}</div>}\r\n\t        {products.map(producto => (\r\n\t          <Col xl={3} lg={3} md={6} sm={12} xs={12} key={producto.id} className=\"mb-3\">\r\n\t            <Card className='shadow-sm'>\r\n\t              <Card.Body>\r\n\t                <Card.Title>{producto.name}</Card.Title>\r\n\t\t\t\t\t<Card.Subtitle className=\"my-1 text-muted\">\r\n\t\t\t\t\t\t{producto.active === true ? \"Disponible\" : \"No disponible\"}\r\n\t\t\t\t\t</Card.Subtitle>\r\n\t\t\t\t\t<Card.Text>{producto.description || 'Sin descripción'}</Card.Text>\r\n\t                <Card.Text>${producto.price}</Card.Text>\r\n\t\t\t\t\t<Card.Text>\r\n\t\t\t\t\t    Unidades disponibles: {producto.quantity}\r\n\t\t\t\t\t</Card.Text>\r\n\t                <div xs=\"auto\">\r\n\t                  <Button\r\n\t                    onClick={() => handleEditClick(producto)}\r\n\t                    size=\"sm\"\r\n\t                    variant=\"dark\"\r\n\t                    className=\"mx-1 float-end\"\r\n\t                  >\r\n\t                    Editar\r\n\t                  </Button>\r\n\t                </div>\r\n\t              </Card.Body>\r\n                  <Card.Footer \r\n\t\t\t\t  className=\"text-muted float-end text-end\"\r\n\t\t\t\t  >\r\n\t\t\t\t  \t<i>\r\n\t\t\t\t\t\tUltima modificación: {parseDateLong(producto.last_update)}\t\t\t\t\t\r\n\t\t\t\t    </i>\r\n            \t  </Card.Footer>\r\n\t            </Card>\r\n\r\n\t            {/* Edit Modal */}\r\n\t            <Modal\r\n\t              show={editProductId === producto.id}\r\n\t              onHide={() => setEditProductId(null)}\r\n\t            >\r\n\t              <Modal.Header closeButton>\r\n\t                <Modal.Title>Editando producto: {producto.name}</Modal.Title>\r\n\t              </Modal.Header>\r\n\t              <Modal.Body>\r\n\t                <Form \r\n\t\t\t\t\tid=\"edit-product-form\"\r\n\t\t\t\t\tonSubmit={e => { e.preventDefault(); handleSaveChanges() }}>\r\n\t                  <Row>\r\n\t                    <FloatingLabel\r\n\t                      controlId=\"floatingInput\"\r\n\t                      label=\"Nombre del producto\"\r\n\t                      className=\"mb-3\"\r\n\t                    >\r\n\t                      <Form.Control\r\n\t                        type=\"text\"\r\n\t                        name=\"name\"\r\n\t                        value={editForm.name}\r\n\t                        onChange={handleFormChange}\r\n\t                        placeholder=\"Nombre del producto\"\r\n\t                      />\r\n\t                    </FloatingLabel>\r\n\t                  </Row>\r\n\t                  <Row>\r\n\t                    <Form.Group as={Col}>\r\n\t\t\t\t\t\t<Form.Label>Precio</Form.Label>\r\n\t                      <InputGroup>\r\n\t                        <InputGroup.Text>$</InputGroup.Text>\r\n\t                        <Form.Control\r\n\t                          type=\"number\"\r\n\t                          name=\"price\"\r\n\t                          value={editForm.price}\r\n\t                          onChange={handleFormChange}\r\n\t                          placeholder=\"Precio del producto\"\r\n\t                        />\r\n\t                      </InputGroup>\r\n\t\t\t\t\t\t  </Form.Group>\r\n\t\t\t\t\t\t  <Form.Group as={Col}>\r\n\t\t\t\t\t\t  <Form.Label>Unidades</Form.Label>\r\n                            <InputGroup>\r\n                                <InputGroup.Text>Unidades</InputGroup.Text>\n                                <Form.Control\n                                    type=\"number\"\n                                    name=\"quantity\"\n                                    value={editForm.quantity}\n                                    onChange={handleFormChange}\n                                    placeholder=\"Cantidad del producto\"\n                                />\r\n                            </InputGroup>\n                          </Form.Group>\r\n\t                  </Row>\r\n\t\t\t\t\t  <Row className=\"my-3\">\r\n\t\t\t\t\t\t  <FloatingLabel\r\n\t\t\t\t\t\t  controlId=\"floatingInput\"\r\n\t\t\t\t\t\t  label=\"Descripción del producto\"\r\n\t\t\t\t\t\t  >\r\n\t\t\t\t          <Form.Control\r\n\t\t                    as=\"textarea\"\r\n\t\t                    name=\"description\"\r\n\t\t                    value={editForm.description}\r\n\t\t                    onChange={handleFormChange}\r\n\t\t                    placeholder=\"Descripción del producto\"\r\n\t\t                    rows={3}\r\n\t\t                  \t/>\r\n\t\t\t\t\t\t  </FloatingLabel>\r\n\t\t\t\t      </Row>\r\n\t\t\t\t\t  <Row className=\"mb-3\">\r\n\t\t\t\t\t    <Form.Label>Categorías del producto:</Form.Label>\n\t\t\t\t\t\t{categories.map(cat => (\r\n\t\t\t\t\t\t  <Form.Check\r\n\t\t\t\t\t\t    className=\"mx-3\"\r\n\t\t\t\t\t\t    key={cat.id}\r\n\t\t\t\t\t\t    type=\"checkbox\"\r\n\t\t\t\t\t\t    label={cat.name}\r\n\t\t\t\t\t\t    name=\"categories\"\r\n\t\t\t\t\t\t    checked={Array.isArray(editForm.categories) && editForm.categories.some(c => c.id === cat.id)}\r\n\t\t\t\t\t\t    onChange={() => handleCategoryChange(cat.id)}\r\n\t\t\t\t\t\t  />\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t  </Row>\r\n\t                  <Row className=\"m-2\">\r\n\t\t\t\t\t  {roles.includes('ROLE_ADMIN') && \r\n\t\t\t\t\t\t(<Form.Check\r\n\t                      type=\"switch\"\r\n\t                      name=\"active\"\r\n\t                      checked={editForm.active}\r\n\t                      onChange={handleFormChange}\r\n\t                      label={editForm.active ? \"Producto Activo\" : \"Producto Inactivo\"}\r\n\t                    />)}      \r\n\t                  </Row>\r\n\t                </Form>\r\n\t              </Modal.Body>\r\n\t              <Modal.Footer>\r\n\t                <Button variant=\"secondary\"\r\n\t\t\t\t\tonClick={() => setEditProductId(null)}\r\n\t\t\t\t\t>\r\n\t                  Cerrar\r\n\t                </Button>\r\n\t                <Button \r\n\t\t\t\t\tvariant=\"primary\" \r\n\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\tform=\"edit-product-form\"\r\n\t\t\t\t\tonClick={handleSaveChanges}>\r\n\t                  Guardar Cambios\r\n\t                </Button>\r\n\t              </Modal.Footer>\r\n\t            </Modal>\r\n\t          </Col>\r\n\t        ))}\r\n\t      </Row>\r\n\t    </Container>\r\n\t  );\r\n}\r\n\r\nexport default Productos;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}